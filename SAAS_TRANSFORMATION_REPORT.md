# ğŸ“Š ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„ Ø¹Ù† Ù…Ø´Ø±ÙˆØ¹ AL RABEI REAL ESTATE
## ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„Ø­Ø§Ù„ÙŠ ÙˆØªÙˆØµÙŠØ§Øª Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ SaaS

> **âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø©**: Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙŠØªØ¶Ù…Ù† Ù†Ø¸Ø§Ù… Ø¯ÙØ¹ Ø£ÙˆÙ†Ù„Ø§ÙŠÙ† (Stripe/PayTabs).  
> Ø¥Ø°Ø§ ÙƒÙ†Øª ØªÙØ¶Ù„ **Ù†Ø¸Ø§Ù… Ø¯ÙØ¹ ÙŠØ¯ÙˆÙŠ (Ø§Ù„Ø´ÙŠÙƒØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©)** Ø¨Ø¯ÙˆÙ† ØªÙƒÙ„ÙØ© ØªØ·ÙˆÙŠØ±ØŒ  
> Ø±Ø§Ø¬Ø¹ Ø§Ù„Ù…Ù„Ù: **`SAAS_PLAN_MANUAL_PAYMENT.md`** - Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ù…Ø®ØµØµØ© Ù„Ù„Ø¯ÙØ¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙŠØ§Øª

1. [Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹](#Ù†Ø¸Ø±Ø©-Ø¹Ø§Ù…Ø©-Ø¹Ù„Ù‰-Ø§Ù„Ù…Ø´Ø±ÙˆØ¹)
2. [ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©](#ØªØ­Ù„ÙŠÙ„-Ø§Ù„Ø¨Ù†ÙŠØ©-Ø§Ù„Ø­Ø§Ù„ÙŠØ©)
3. [ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ© Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ SaaS](#ØªÙ‚ÙŠÙŠÙ…-Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ©-Ù„Ù„ØªØ­ÙˆÙŠÙ„-Ø¥Ù„Ù‰-saas)
4. [Ø§Ù„ØªÙˆØµÙŠØ§Øª ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª](#Ø§Ù„ØªÙˆØµÙŠØ§Øª-ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª)
5. [Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ°](#Ø®Ø·Ø©-Ø§Ù„ØªÙ†ÙÙŠØ°)
6. [Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ù€ SaaS](#Ø§Ù„Ù…ÙŠØ²Ø§Øª-Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©-Ù„Ù„Ù€-saas)

---

## ğŸ“Œ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

### Ø§Ù„ÙˆØµÙ
**AL RABEI REAL ESTATE** Ù‡Ùˆ Ù…Ù†ØµØ© Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù‚Ø§Ø±ÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù…ØµÙ…Ù…Ø© Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©. ÙŠÙˆÙØ± Ø§Ù„Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ù…ØªÙ‚Ø¯Ù…Ø© Ù„Ù„Ø¹Ù‚Ø§Ø±Ø§ØªØŒ ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† (Leads)ØŒ ÙˆÙ„ÙˆØ­Ø§Øª ØªØ­ÙƒÙ… Ù„Ù„Ù…Ø¯Ø±Ø§Ø¡ ÙˆØ§Ù„ÙˆØ³Ø·Ø§Ø¡ Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠÙŠÙ†.

### Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©

#### Frontend
- **Next.js 14** (App Router) - Ø¥Ø·Ø§Ø± Ø¹Ù…Ù„ React Ø§Ù„Ø­Ø¯ÙŠØ«
- **Tailwind CSS** - ØªØµÙ…ÙŠÙ… Ø³Ø±ÙŠØ¹ ÙˆÙ…ØªØ¬Ø§ÙˆØ¨
- **React Query (TanStack Query)** - Ø¥Ø¯Ø§Ø±Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø§Ø¯Ù…
- **React Hook Form** - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ù…Ø§Ø°Ø¬
- **Axios** - Ø·Ù„Ø¨Ø§Øª HTTP
- **Framer Motion** - Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ù…ØªØ­Ø±ÙƒØ©

#### Backend
- **Node.js** Ù…Ø¹ **Express.js**
- **Prisma ORM** - Ø¥Ø¯Ø§Ø±Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- **PostgreSQL** - Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
- **JWT** - Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ø£Ù…Ø§Ù†
- **Multer** - Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª
- **Helmet** - Ø£Ù…Ø§Ù† HTTP
- **Express Rate Limit** - Ø­Ù…Ø§ÙŠØ© Ù…Ù† DDoS

---

## ğŸ” ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

### âœ… Ù†Ù‚Ø§Ø· Ø§Ù„Ù‚ÙˆØ©

#### 1. Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ©
- âœ… ÙØµÙ„ ÙˆØ§Ø¶Ø­ Ø¨ÙŠÙ† Frontend Ùˆ Backend
- âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… RESTful API
- âœ… Ø¨Ù†ÙŠØ© Ù…Ù†Ø¸Ù…Ø© Ù„Ù„Ù…Ù„ÙØ§Øª ÙˆØ§Ù„Ù…Ø¬Ù„Ø¯Ø§Øª
- âœ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Prisma ORM ÙŠÙˆÙØ± Ø­Ù…Ø§ÙŠØ© Ù…Ù† SQL Injection

#### 2. Ø§Ù„Ø£Ù…Ø§Ù†
- âœ… JWT Authentication Ù…Ø¹ Refresh Tokens
- âœ… Role-Based Access Control (Admin, Broker, Client)
- âœ… Password Hashing Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… bcrypt
- âœ… Helmet.js Ù„Ù„Ø£Ù…Ø§Ù†
- âœ… Rate Limiting Ù„Ù„Ø­Ù…Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù‡Ø¬Ù…Ø§Øª
- âœ… CORS Configuration ØµØ­ÙŠØ­Ø©

#### 3. Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- âœ… ØªØµÙ…ÙŠÙ… Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¬ÙŠØ¯ Ù…Ø¹ Ø¹Ù„Ø§Ù‚Ø§Øª ÙˆØ§Ø¶Ø­Ø©
- âœ… Ø¯Ø¹Ù… Multi-tenancy Ø¬Ø²Ø¦ÙŠ (Company Model Ù…ÙˆØ¬ÙˆØ¯)
- âœ… Migration System Ù…Ø¹ Prisma
- âœ… Models Ù…Ù†Ø¸Ù…Ø© (User, Property, Lead, Deal, Company)

#### 4. Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø© (CRUD)
- âœ… Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† (Leads)
- âœ… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙÙ‚Ø§Øª (Deals)
- âœ… Ù†Ø¸Ø§Ù… Ø§Ù„Ø¹Ù…ÙˆÙ„Ø§Øª Ø§Ù„Ø´Ù‡Ø±ÙŠ
- âœ… ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø£Ø¯Ø§Ø¡
- âœ… Ù„ÙˆØ­Ø§Øª ØªØ­ÙƒÙ… Ù…Ù†ÙØµÙ„Ø© Ù„ÙƒÙ„ Ø¯ÙˆØ±

### âš ï¸ Ù†Ù‚Ø§Ø· Ø§Ù„Ø¶Ø¹Ù ÙˆØ§Ù„ØªØ­Ø¯ÙŠØ§Øª

#### 1. Multi-Tenancy ØºÙŠØ± Ù…ÙƒØªÙ…Ù„
- âš ï¸ Company Model Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† Ø§Ù„Ø¹Ø²Ù„ ØºÙŠØ± Ù…ÙƒØªÙ…Ù„
- âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Middleware Ù„ÙØ±Ø¶ Ø¹Ø²Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙŠÙ† Ø§Ù„Ø´Ø±ÙƒØ§Øª
- âš ï¸ Queries Ù„Ø§ ØªÙÙ„ØªØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø­Ø³Ø¨ companyId

#### 2. Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ù†Ø¸Ø§Ù… Ø§Ø´ØªØ±Ø§Ùƒ/Ø¯ÙØ¹
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Subscription Model
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Payment Gateway Integration
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Plan Management (Free, Basic, Premium)
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Usage Limits Ø­Ø³Ø¨ Ø§Ù„Ø®Ø·Ø©

#### 3. Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Billing System
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Invoice Generation
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Payment History
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Automated Billing

#### 4. API Rate Limiting Ø¨Ø³ÙŠØ·
- âš ï¸ Rate Limiting Ø¹Ø§Ù… ÙÙ‚Ø·
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Per-User Ø£Ùˆ Per-Company Rate Limiting
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Usage Tracking

#### 5. Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Analytics Ù…ØªÙ‚Ø¯Ù…
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ User Analytics
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Company Performance Metrics
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Usage Statistics

#### 6. Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Onboarding System
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Company Registration Flow
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Trial Period Management
- âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Welcome Emails

---

## ğŸ¯ ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¬Ø§Ù‡Ø²ÙŠØ© Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ SaaS

### Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ø§Ù„ÙŠØ©: **6/10**

| Ø§Ù„Ù…Ø¹ÙŠØ§Ø± | Ø§Ù„Ø­Ø§Ù„Ø© | Ø§Ù„Ù†Ù‚Ø§Ø· |
|---------|--------|--------|
| Multi-Tenancy | Ø¬Ø²Ø¦ÙŠ | 5/10 |
| Authentication & Authorization | Ù…Ù…ØªØ§Ø² | 9/10 |
| Subscription Management | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | 0/10 |
| Payment Integration | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | 0/10 |
| Usage Tracking | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | 0/10 |
| Billing System | ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ | 0/10 |
| API Security | Ø¬ÙŠØ¯ | 7/10 |
| Scalability | Ù…ØªÙˆØ³Ø· | 6/10 |
| Monitoring & Analytics | Ù…Ø­Ø¯ÙˆØ¯ | 4/10 |
| Documentation | Ø¬ÙŠØ¯ | 8/10 |

### Ù…Ø§ Ù‡Ùˆ Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„ âœ…
1. **Company Model** - Ø§Ù„Ø£Ø³Ø§Ø³ Ù…ÙˆØ¬ÙˆØ¯
2. **Role-Based Access** - Ø¬Ø§Ù‡Ø²
3. **API Structure** - Ù…Ù†Ø¸Ù… ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„ØªÙˆØ³Ø¹
4. **Database Schema** - Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªÙˆØ³Ø¹

### Ù…Ø§ ÙŠØ­ØªØ§Ø¬ Ø¥Ø¶Ø§ÙØªÙ‡ âŒ
1. **Subscription Plans**
2. **Payment Gateway**
3. **Usage Limits & Tracking**
4. **Billing & Invoicing**
5. **Complete Multi-Tenancy Isolation**
6. **Admin Portal Ù„Ù„Ø´Ø±ÙƒØ§Øª**
7. **Trial Management**

---

## ğŸ’¡ Ø§Ù„ØªÙˆØµÙŠØ§Øª ÙˆØ§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª

### ğŸ”´ Ø£ÙˆÙ„ÙˆÙŠØ© Ø¹Ø§Ù„ÙŠØ© (Critical)

#### 1. Ø¥ÙƒÙ…Ø§Ù„ Ù†Ø¸Ø§Ù… Multi-Tenancy

**Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:**
- Company Model Ù…ÙˆØ¬ÙˆØ¯ Ù„ÙƒÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØºÙŠØ± Ù…Ø¹Ø²ÙˆÙ„Ø©
- ÙŠÙ…ÙƒÙ† Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø±Ø¤ÙŠØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø´Ø±ÙƒØ§Øª Ø£Ø®Ø±Ù‰

**Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ù‚ØªØ±Ø­:**

```javascript
// middleware/tenantIsolation.js
const tenantIsolation = async (req, res, next) => {
  if (req.user && req.user.companyId) {
    req.tenantId = req.user.companyId;
  }
  next();
};

// ÙÙŠ ÙƒÙ„ Query
const properties = await prisma.property.findMany({
  where: {
    companyId: req.tenantId,
    // ... other filters
  }
});
```

**Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**
- Ø¥Ø¶Ø§ÙØ© Middleware Ù„Ù„Ø¹Ø²Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
- ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Queries Ù„ØªØ¶Ù…ÙŠÙ† companyId Filter
- Ø¥Ø¶Ø§ÙØ© Tenant Context ÙÙŠ Ø¬Ù…ÙŠØ¹ Routes

#### 2. Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª (Subscription System)

**Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ø¥Ø¶Ø§ÙØªÙ‡:**

```prisma
model Subscription {
  id            Int       @id @default(autoincrement())
  companyId     Int       @unique @map("company_id")
  planId        Int       @map("plan_id")
  status        String    // active, cancelled, expired, trial
  startDate     DateTime  @map("start_date")
  endDate       DateTime? @map("end_date")
  trialEndDate  DateTime? @map("trial_end_date")
  autoRenew     Boolean   @default(true) @map("auto_renew")
  createdAt     DateTime  @default(now()) @map("created_at")
  updatedAt     DateTime  @updatedAt @map("updated_at")
  
  company       Company   @relation(fields: [companyId], references: [id])
  plan          Plan      @relation(fields: [planId], references: [id])
  invoices      Invoice[]
  
  @@map("subscriptions")
}

model Plan {
  id              Int       @id @default(autoincrement())
  name            String    // Free, Basic, Premium, Enterprise
  price           Float     // Monthly price
  currency        String    @default("AED")
  propertiesLimit Int?      @map("properties_limit")
  brokersLimit    Int?      @map("brokers_limit")
  leadsLimit      Int?      @map("leads_limit")
  features        String?   // JSON array
  isActive        Boolean   @default(true) @map("is_active")
  createdAt       DateTime  @default(now()) @map("created_at")
  
  subscriptions   Subscription[]
  
  @@map("plans")
}
```

#### 3. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹ (Payment Integration)

**Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ù‚ØªØ±Ø­Ø©:**
- **Stripe** - Ø§Ù„Ø£ÙƒØ«Ø± Ø´Ø¹Ø¨ÙŠØ© Ø¹Ø§Ù„Ù…ÙŠØ§Ù‹
- **PayPal** - Ø´Ø§Ø¦Ø¹ ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø©
- **PayTabs** - Ù…Ø­Ù„ÙŠ ÙÙŠ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª
- **Moyasar** - Ù…Ø­Ù„ÙŠ ÙÙŠ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©

**Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
```javascript
// routes/payments.js
router.post('/create-checkout', authenticateToken, async (req, res) => {
  // Create Stripe checkout session
});

router.post('/webhook', express.raw({type: 'application/json'}), async (req, res) => {
  // Handle Stripe webhook
});
```

#### 4. ØªØªØ¨Ø¹ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… (Usage Tracking)

```prisma
model Usage {
  id            Int       @id @default(autoincrement())
  companyId     Int       @map("company_id")
  resourceType  String    @map("resource_type") // property, lead, broker
  count         Int       @default(0)
  month         Int
  year          Int
  createdAt     DateTime  @default(now()) @map("created_at")
  
  company       Company   @relation(fields: [companyId], references: [id])
  
  @@unique([companyId, resourceType, month, year])
  @@map("usage")
}
```

### ğŸŸ¡ Ø£ÙˆÙ„ÙˆÙŠØ© Ù…ØªÙˆØ³Ø·Ø© (Important)

#### 5. Ù†Ø¸Ø§Ù… Ø§Ù„ÙÙˆØ§ØªÙŠØ± (Billing System)

```prisma
model Invoice {
  id              Int       @id @default(autoincrement())
  subscriptionId  Int       @map("subscription_id")
  amount          Float
  currency        String    @default("AED")
  status          String    // pending, paid, failed, refunded
  dueDate         DateTime  @map("due_date")
  paidAt          DateTime? @map("paid_at")
  invoiceNumber   String    @unique @map("invoice_number")
  pdfUrl          String?   @map("pdf_url")
  createdAt       DateTime  @default(now()) @map("created_at")
  
  subscription    Subscription @relation(fields: [subscriptionId], references: [id])
  
  @@map("invoices")
}
```

#### 6. Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Super Admin

**Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
- Ø¥Ø¯Ø§Ø±Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø´Ø±ÙƒØ§Øª
- Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø®Ø·Ø· ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±
- Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª

#### 7. Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª (Notifications)

```prisma
model Notification {
  id          Int       @id @default(autoincrement())
  userId      Int?      @map("user_id")
  companyId   Int?      @map("company_id")
  type        String    // subscription_expiring, payment_failed, limit_reached
  title       String
  message     String
  isRead      Boolean   @default(false) @map("is_read")
  createdAt   DateTime  @default(now()) @map("created_at")
  
  user        User?     @relation(fields: [userId], references: [id])
  company     Company?  @relation(fields: [companyId], references: [id])
  
  @@map("notifications")
}
```

#### 8. Email System

**Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:**
- Welcome Emails
- Subscription Confirmation
- Payment Receipts
- Trial Expiring Warnings
- Usage Limit Alerts

**Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª:**
- **SendGrid**
- **Mailgun**
- **AWS SES**
- **Resend**

### ğŸŸ¢ Ø£ÙˆÙ„ÙˆÙŠØ© Ù…Ù†Ø®ÙØ¶Ø© (Nice to Have)

#### 9. Analytics Dashboard
- User Activity Tracking
- Property Performance Metrics
- Lead Conversion Rates
- Revenue Analytics

#### 10. API Documentation
- Swagger/OpenAPI
- Postman Collection
- API Versioning

#### 11. Multi-Language Support
- Ø¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©/Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©
- i18n Implementation

#### 12. Mobile App
- React Native App
- Push Notifications

---

## ğŸš€ Ø®Ø·Ø© Ø§Ù„ØªÙ†ÙÙŠØ°

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1: Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª (4-6 Ø£Ø³Ø§Ø¨ÙŠØ¹)

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1-2: Multi-Tenancy
- [ ] Ø¥Ø¶Ø§ÙØ© Tenant Isolation Middleware
- [ ] ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Queries Ù„Ù„Ø¹Ø²Ù„
- [ ] Ø¥Ø¶Ø§ÙØ© Tests Ù„Ù„Ø¹Ø²Ù„
- [ ] ØªØ­Ø¯ÙŠØ« API Documentation

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3-4: Subscription System
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Plan & Subscription Models
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Subscription Routes
- [ ] Ø¥Ø¶Ø§ÙØ© Plan Management UI
- [ ] Ø¥Ø¶Ø§ÙØ© Subscription Status Checks

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 5-6: Usage Tracking
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Usage Model
- [ ] Ø¥Ø¶Ø§ÙØ© Usage Tracking ÙÙŠ CRUD Operations
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Usage Reports API
- [ ] Ø¥Ø¶Ø§ÙØ© Usage Limits Enforcement

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2: Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„ÙÙˆØªØ±Ø© (3-4 Ø£Ø³Ø§Ø¨ÙŠØ¹)

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 7-8: Payment Integration
- [ ] Ø§Ø®ØªÙŠØ§Ø± Payment Gateway (Stripe/PayTabs)
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Payment Routes
- [ ] Ø¥Ø¶Ø§ÙØ© Webhook Handlers
- [ ] Ø¥Ø¶Ø§ÙØ© Payment UI

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 9-10: Billing System
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Invoice Model
- [ ] Ø¥Ø¶Ø§ÙØ© Invoice Generation
- [ ] Ø¥Ø¶Ø§ÙØ© PDF Generation
- [ ] Ø¥Ø¶Ø§ÙØ© Payment History

### Ø§Ù„Ù…Ø±Ø­Ù„Ø© 3: Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª (2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹)

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 11-12: Super Admin & Notifications
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Super Admin Dashboard
- [ ] Ø¥Ø¶Ø§ÙØ© Notification System
- [ ] Ø¥Ø¶Ø§ÙØ© Email Service
- [ ] Ø¥Ø¶Ø§ÙØ© Automated Alerts

#### Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 13: Testing & Documentation
- [ ] Comprehensive Testing
- [ ] API Documentation
- [ ] User Documentation
- [ ] Deployment Guide

---

## ğŸ“¦ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ù€ SaaS

### 1. Subscription Plans

```javascript
const PLANS = {
  FREE: {
    name: 'Free',
    price: 0,
    propertiesLimit: 10,
    brokersLimit: 1,
    leadsLimit: 50,
    features: ['basic_properties', 'basic_leads']
  },
  BASIC: {
    name: 'Basic',
    price: 299, // AED/month
    propertiesLimit: 100,
    brokersLimit: 5,
    leadsLimit: 500,
    features: ['unlimited_properties', 'advanced_leads', 'reports']
  },
  PREMIUM: {
    name: 'Premium',
    price: 799, // AED/month
    propertiesLimit: 500,
    brokersLimit: 20,
    leadsLimit: 2000,
    features: ['unlimited_properties', 'unlimited_leads', 'advanced_reports', 'api_access']
  },
  ENTERPRISE: {
    name: 'Enterprise',
    price: 1999, // AED/month
    propertiesLimit: -1, // Unlimited
    brokersLimit: -1,
    leadsLimit: -1,
    features: ['everything', 'custom_integrations', 'dedicated_support']
  }
};
```

### 2. Usage Limits Enforcement

```javascript
// middleware/checkUsageLimit.js
const checkUsageLimit = async (req, res, next) => {
  const subscription = await getSubscription(req.user.companyId);
  const plan = await getPlan(subscription.planId);
  
  const usage = await getCurrentUsage(req.user.companyId);
  
  // Check properties limit
  if (plan.propertiesLimit !== -1 && usage.properties >= plan.propertiesLimit) {
    return res.status(403).json({
      error: 'Properties limit reached',
      limit: plan.propertiesLimit,
      current: usage.properties
    });
  }
  
  next();
};
```

### 3. Automated Billing

```javascript
// jobs/billing.js
const processMonthlyBilling = async () => {
  const activeSubscriptions = await getActiveSubscriptions();
  
  for (const subscription of activeSubscriptions) {
    // Generate invoice
    const invoice = await createInvoice(subscription);
    
    // Process payment
    const payment = await processPayment(subscription, invoice);
    
    // Send receipt
    await sendReceiptEmail(subscription.companyId, invoice);
  }
};
```

### 4. Trial Management

```javascript
// Ø¹Ù†Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø±ÙƒØ© Ø¬Ø¯ÙŠØ¯Ø©
const createCompanyWithTrial = async (companyData) => {
  const company = await Company.create(companyData);
  
  const freePlan = await Plan.findByName('Free');
  const trialEndDate = new Date();
  trialEndDate.setDate(trialEndDate.getDate() + 14); // 14 days trial
  
  await Subscription.create({
    companyId: company.id,
    planId: freePlan.id,
    status: 'trial',
    trialEndDate: trialEndDate
  });
  
  return company;
};
```

---

## ğŸ”§ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

### 1. ØªØ­Ø¯ÙŠØ« Database Schema

```prisma
// Ø¥Ø¶Ø§ÙØ© Models Ø¬Ø¯ÙŠØ¯Ø©
model Plan {
  // ... ÙƒÙ…Ø§ Ø°ÙƒØ± Ø£Ø¹Ù„Ø§Ù‡
}

model Subscription {
  // ... ÙƒÙ…Ø§ Ø°ÙƒØ± Ø£Ø¹Ù„Ø§Ù‡
}

model Invoice {
  // ... ÙƒÙ…Ø§ Ø°ÙƒØ± Ø£Ø¹Ù„Ø§Ù‡
}

model Usage {
  // ... ÙƒÙ…Ø§ Ø°ÙƒØ± Ø£Ø¹Ù„Ø§Ù‡
}

model Notification {
  // ... ÙƒÙ…Ø§ Ø°ÙƒØ± Ø£Ø¹Ù„Ø§Ù‡
}

// ØªØ­Ø¯ÙŠØ« Company Model
model Company {
  // ... existing fields
  subscription Subscription?
  usage        Usage[]
  invoices     Invoice[]
  notifications Notification[]
}
```

### 2. Ø¥Ø¶Ø§ÙØ© Middleware Ø¬Ø¯ÙŠØ¯

```javascript
// middleware/tenantIsolation.js
// middleware/checkUsageLimit.js
// middleware/checkSubscription.js
// middleware/requireActiveSubscription.js
```

### 3. ØªØ­Ø¯ÙŠØ« Routes

```javascript
// routes/subscriptions.js
// routes/payments.js
// routes/invoices.js
// routes/usage.js
// routes/plans.js
```

### 4. Ø¥Ø¶Ø§ÙØ© Services

```javascript
// services/subscriptionService.js
// services/paymentService.js
// services/billingService.js
// services/emailService.js
// services/usageService.js
```

---

## ğŸ“Š Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ù…Ù‚Ø¯Ø±Ø© ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯

### Ø§Ù„ØªØ·ÙˆÙŠØ±
- **Backend Developer**: 10-12 Ø£Ø³Ø§Ø¨ÙŠØ¹
- **Frontend Developer**: 6-8 Ø£Ø³Ø§Ø¨ÙŠØ¹
- **DevOps Engineer**: 2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹
- **QA Engineer**: 2-3 Ø£Ø³Ø§Ø¨ÙŠØ¹

### Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© (Ø´Ù‡Ø±ÙŠØ§Ù‹)
- **Hosting (Vercel/Railway)**: $50-100
- **Database (PostgreSQL)**: $25-50
- **Payment Gateway**: 2.9% + $0.30 per transaction
- **Email Service**: $10-20
- **Storage (Images)**: $10-30

### Ø§Ù„Ø£Ø¯ÙˆØ§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª
- **Stripe/PayTabs**: Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
- **SendGrid/Mailgun**: $15-50
- **Monitoring (Sentry)**: $26-99
- **Analytics**: $0-50

---

## âœ… Checklist Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ SaaS

### Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª
- [ ] Ø¥ÙƒÙ…Ø§Ù„ Multi-Tenancy Isolation
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Subscription System
- [ ] Ø¥Ø¶Ø§ÙØ© Usage Tracking
- [ ] ØªØ·Ø¨ÙŠÙ‚ Usage Limits

### Ø§Ù„Ø¯ÙØ¹ ÙˆØ§Ù„ÙÙˆØªØ±Ø©
- [ ] Ø§Ø®ØªÙŠØ§Ø± Payment Gateway
- [ ] Ø¥Ø¶Ø§ÙØ© Payment Integration
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Billing System
- [ ] Ø¥Ø¶Ø§ÙØ© Invoice Generation

### Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Super Admin Dashboard
- [ ] Ø¥Ø¶Ø§ÙØ© Plan Management
- [ ] Ø¥Ø¶Ø§ÙØ© Company Management
- [ ] Ø¥Ø¶Ø§ÙØ© User Management per Company

### Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ØªÙˆØ§ØµÙ„
- [ ] Ø¥Ø¹Ø¯Ø§Ø¯ Email Service
- [ ] Ø¥Ø¶Ø§ÙØ© Notification System
- [ ] Ø¥Ø¶Ø§ÙØ© Automated Emails
- [ ] Ø¥Ø¶Ø§ÙØ© In-App Notifications

### Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„
- [ ] ØªØ­Ø¯ÙŠØ« Security Policies
- [ ] Ø¥Ø¶Ø§ÙØ© Data Privacy Compliance
- [ ] Ø¥Ø¶Ø§ÙØ© Terms of Service
- [ ] Ø¥Ø¶Ø§ÙØ© Privacy Policy

### Ø§Ù„ØªÙˆØ«ÙŠÙ‚
- [ ] ØªØ­Ø¯ÙŠØ« API Documentation
- [ ] Ø¥Ù†Ø´Ø§Ø¡ User Guide
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Admin Guide
- [ ] Ø¥Ù†Ø´Ø§Ø¡ Developer Guide

---

## ğŸ¯ Ø§Ù„Ø®Ù„Ø§ØµØ© ÙˆØ§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

### Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ø¯ÙŠÙ‡ **Ø£Ø³Ø§Ø³ Ù‚ÙˆÙŠ** Ù…Ø¹ Ø¨Ù†ÙŠØ© Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Ø¬ÙŠØ¯Ø© ÙˆØ£Ù…Ø§Ù† Ù…ØªÙ‚Ø¯Ù…. Ù„ÙƒÙ†Ù‡ ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ **ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¬ÙˆÙ‡Ø±ÙŠØ©** Ù„Ù„ØªØ­ÙˆÙŠÙ„ Ø¥Ù„Ù‰ SaaS ÙƒØ§Ù…Ù„.

### Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª
1. **Ø¥ÙƒÙ…Ø§Ù„ Multi-Tenancy** - Ø§Ù„Ø£Ù‡Ù… ÙˆØ§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ø§Ù„Ù‚ØµÙˆÙ‰
2. **Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ø´ØªØ±Ø§ÙƒØ§Øª** - Ø£Ø³Ø§Ø³ Ù†Ù…ÙˆØ°Ø¬ SaaS
3. **Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹** - Ø¶Ø±ÙˆØ±ÙŠ Ù„Ù„Ø±Ø¨Ø­
4. **ØªØªØ¨Ø¹ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…** - Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯

### Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª
- **Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨**: 12-16 Ø£Ø³Ø¨ÙˆØ¹
- **Ø§Ù„ØªÙƒÙ„ÙØ©**: $5,000 - $15,000 (Ø­Ø³Ø¨ Ø§Ù„ÙØ±ÙŠÙ‚)
- **Ø§Ù„Ù†ØªÙŠØ¬Ø©**: SaaS Platform Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø·Ù„Ø§Ù‚

### Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©
1. Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ù…Ø¹ Ø§Ù„ÙØ±ÙŠÙ‚
2. ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø¹Ù…Ù„
3. Ø§Ø®ØªÙŠØ§Ø± Payment Gateway Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
4. Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„Ù…Ø±Ø­Ù„Ø© 1 (Multi-Tenancy)

---

**ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø±ÙŠØ±**: ÙŠÙ†Ø§ÙŠØ± 2025  
**Ø§Ù„Ø¥ØµØ¯Ø§Ø±**: 1.0  
**Ø§Ù„Ø­Ø§Ù„Ø©**: Ø¬Ø§Ù‡Ø² Ù„Ù„ØªÙ†ÙÙŠØ°

